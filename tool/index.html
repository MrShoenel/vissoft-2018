<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>VISSOFT 2018</title>
    <link rel="stylesheet" href="./style/main.css" />
  </head>
  <body>

    <header>
      <h1>VISSOFT 2018</h1>
      <div>
        <form>
          <!-- Ugly, I know.. but it works and it's quick 'n dirty :D -->
          <table>
            <tbody>
              <tr>
                <td>
                    <label for="input-data">Select data as CSV-file</label>
                </td>
                <td>
                  <label for="input-model">Select model as JSON-file</label>
                </td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td><input type="file" id="input-data" /></td>
                <td><input type="file" id="input-model" /></td>
                <td><button type="button" id="btn-open" disabled="disabled">Open selected data and model</button></td>
                <td><button type="button" id="btn-open-default">Open default data and model</button></td>
              </tr>
            </tbody>
          </table>
        </form>
      </div>
    </header>

    <div id="main-grid">
      <div id="graph-div">
        graph
        <!--
          Graph will go here, the component for that is 'GridboxGraph'.
        -->
      </div>
      <div id="tsne-grid">
        <div>
          t-SNE
          <!--
            @RAFAEL: Please put your T-SNE implementation here :)
            You can use jQuery and D3 or add other libs below (but
            please install them proper via bower)
          -->
        </div>
        <div>
          Ranking/Selection
          <!--
            I will put something here soon, but first I'll do the graph!
          -->
        </div>
      </div>
    </div>

    <h3 id="status">Status</h3>
    <section>
      <label for="model-load-progress">Model Load Progress:</label>
      <progress id="model-load-progress" min="0" max="1" value="0"></progress>
      <button type="button" id="btn-print">Print Model</button>
      <button type="button" id="btn-export-model">Export Model</button>
      <button type="button" id="btn-recomp-model">Recompute Model</button>
      <pre id="log"></pre>
    </section>
    

    <script src="./bower_components/jquery/dist/jquery.min.js"></script>
    <script src="./bower_components/d3/d3.min.js"></script>
    <script src="./bower_components/rxjs/dist/rx.all.min.js"></script>
    <script src="./node_modules/paralleljs/lib/parallel.js"></script>
    <script src="./node_modules/browser-es-module-loader/dist/babel-browser-build.js"></script>
    <script src="./node_modules/browser-es-module-loader/dist/browser-es-module-loader.js"></script>

    <script type="module" id="init" data-run="false">
    (async() => {
      const scriptTag = document.querySelector('script#init');
      if (scriptTag.getAttribute('data-run') === 'false') {
        scriptTag.setAttribute('data-run', 'true');
      } else {
        return;
      }

      try {
        const run = (await import('./script/main.js')).run;
        await run();
      } catch (e) {
        alert(`An error occurred: ${e}`);
      }
    })();
    </script>
  </body>
</html>