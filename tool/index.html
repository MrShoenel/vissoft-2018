<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>VISSOFT 2018</title>
    <link rel="stylesheet" href="./style/main.css" />
    <link rel="stylesheet" href="./style/dc.css" />
    <link rel="stylesheet" href="./style/tsne.css" />
  </head>
  <body>

    <header>
      <h1>VISSOFT 2018</h1>
      <div>
        <form>
          <!-- Ugly, I know.. but it works and it's quick 'n dirty :D -->
          <table>
            <tbody>
              <tr>
                <td>
                    <label for="input-data">Select data as CSV-file</label>
                </td>
                <td>
                  <label for="input-model">Select model as JSON-file</label>
                </td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td><input type="file" id="input-data" /></td>
                <td><input type="file" id="input-model" /></td>
                <td><button type="button" id="btn-open" disabled="disabled">Open selected data and model</button></td>
                <td>
                  <button disabled="disabled" type="button" id="btn-open-default">Open default data and model</button>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
      </div>
    </header>

    <div id="main-grid">
      <div id="graph-div">
        <!--
          Graph will go here, the component for that is 'GridboxGraph'.
        -->
        <button id="debug-select" disabled="disabled">[Debug] Trigger random selection files</button>
      </div>
      <div id="charts-col"></div>
      <div id="tsne-grid">
        <div>
          <div id='tsne-title'>
            t-SNE plot
            <div>
              <span id="tsne-iter">Iterations: 0</span>
              <span id="tsne-fin">Finished: No</span>
            </div>
          </div>
          <div id='tsne'></div>
        </div>
        <div id='ranking'>
          <div id="ranking-title">
            Selection
            <span id="ranking-num-sel"># of selected elements: 999</span>
          </div>
          <div id="ranking-content">
            <!--
              I will put something here soon, but first I'll do the graph!
            -->
          </div>
        </div>
      </div>
    </div>

    <h3 id="status">Status</h3>
    <section>
      <label for="model-load-progress">Model Load Progress:</label>
      <progress id="model-load-progress" min="0" max="1" value="0"></progress>
      <button type="button" id="btn-print">Print Model</button>
      <button type="button" id="btn-export-model">Export Model</button>
      <button type="button" id="btn-recomp-model">Recompute Model</button>
      <pre id="log"></pre>
    </section>
    

    <script src="./bower_components/jquery/dist/jquery.min.js"></script>
    <script src="./bower_components/d3/d3.min.js"></script>
    <script src="./bower_components/rxjs/dist/rx.all.min.js"></script>
    <script src="./node_modules/paralleljs/lib/parallel.js"></script>
    <script src="./node_modules/browser-es-module-loader/dist/babel-browser-build.js"></script>
    <script src="./node_modules/browser-es-module-loader/dist/browser-es-module-loader.js"></script>

    <script src="./script/dc-canvas-bundle.js"></script>
    <script src="./script/plots.js"></script>
    <script src="./bower_components/tsnejs/tsne.js"></script>

    <script type="module" id="init" data-run="false">
    (async() => {
      const scriptTag = document.querySelector('script#init');
      if (scriptTag.getAttribute('data-run') === 'false') {
        scriptTag.setAttribute('data-run', 'true');
      } else {
        return;
      }

      try {
        const run = (await import('./script/main.js')).run;
        await run();
      } catch (e) {
        alert(`An error occurred: ${e}`);
      }

    })();
    </script>
  </body>
</html>